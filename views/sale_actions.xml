<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <!-- Action for viewing real estate quotations -->
    <record id="action_real_estate_reservations" model="ir.actions.act_window">
        <field name="name">Quotations</field>
        <field name="res_model">sale.order</field>
        <field name="view_mode">tree,form,calendar</field>
        <field name="domain">[('state', 'in', ['draft', 'sent', 'sale']), ('has_apartment', '=', True)]</field>
        <field name="context">{
            'default_is_real_estate': True,
            'search_default_my_quotation': 1
        }</field>

    </record>

    <!-- Action for viewing active apartment reservations -->
    <record id="action_real_estate_active_reservations" model="ir.actions.act_window">
        <field name="name">Active Reservations</field>
        <field name="res_model">sale.order</field>
        <field name="view_mode">tree,form,calendar</field>
        <field name="domain">[('state', '=', 'sale'), ('has_apartment', '=', True)]</field>
        <field name="context">{
            'default_is_real_estate': True
        }</field>
        <field name="help" type="html">
            <p class="o_view_nocontent_smiling_face">
                No active reservations found!
            </p>
            <p>
                Active reservations are confirmed sales orders with properties (apartments or stores).
                These properties are reserved and awaiting handover.
            </p>
        </field>
    </record>

    <!-- Action for creating a new reservation (quotation) -->
    <record id="action_create_real_estate_reservation" model="ir.actions.act_window">
        <field name="name">Create Reservation</field>
        <field name="res_model">sale.order</field>
        <field name="view_mode">form</field>
        <field name="target">current</field>
        <field name="context">{
            'default_is_real_estate': True,
            'default_project_readonly': False
        }</field>
        <field name="help" type="html">
            <p class="o_view_nocontent_smiling_face">
                Create a new property reservation
            </p>
            <p>
                Select a customer and add a property (apartment or store) to reserve it.
                The property status will be automatically updated to "Reserved".
            </p>
        </field>
    </record>

    <!-- Action for viewing real estate invoices -->
    <record id="action_real_estate_invoices" model="ir.actions.act_window">
        <field name="name">Invoices</field>
        <field name="res_model">account.move</field>
        <field name="view_mode">tree,form</field>
        <field name="domain">[('move_type', '=', 'out_invoice'), ('invoice_origin', 'ilike', 'S')]</field>
        <field name="context">{
            'search_default_posted': 1,
            'default_move_type': 'out_invoice',
            'default_partner_id': context.get('partner_id', False)
        }</field>
        <field name="help" type="html">
            <p class="o_view_nocontent_smiling_face">
                No invoices found!
            </p>
            <p>
                This view shows all customer invoices related to real estate sales.
            </p>
        </field>
    </record>

</odoo>
